<launch>
  <include file="$(find pr2_machine)/pr2.machine"/>

  <node name="elevator_move_base" pkg="roseus" type="roseus"
	output="screen" respawn="true"
	args="$(find elevator_move_base_pr2)/src/elevator-move-base.l"/>

  <!-- start objectdetection/tf -->
  <group ns="/narrow_stereo/left">
    <include file="$(find jsk_perception)/launch/eusmodel_detection_elevator-panels-eng2.launch"/>
    <node name="find_elevator_button" pkg="roseus" type="roseus"
	  respawn="true" machine="c2"
	  args="$(find elevator_move_base_pr2)/src/find-elevator-button.l" />
  </group>

  <node name="light_detector" pkg="elevator_move_base_pr2"
	type="color_point_detector" machine="c2">
    <remap from="image" to="/wide_stereo/left/image_color"/>
    <param name="red" value="253"/>
    <param name="green" value="251"/>
    <param name="blue" value="183"/>
  </node>

  <!-- read the elevator floor number -->
  <node name="panel_camera"  machine="c2"
        pkg="virtual_camera" type="virtual_camera_mono">
    <remap from="image" to="/narrow_stereo/left/image_raw"/>
  </node>

  <node name="elevator_number" pkg="elevator_move_base_pr2" type="matchtemplate.py" output="screen" machine="c2">
    <rosparam file="$(find elevator_move_base_pr2)/launch/template-eng2.yaml" command="load"/>
    <remap from="~image" to="/panel_camera/image"/>
  </node>

</launch>
